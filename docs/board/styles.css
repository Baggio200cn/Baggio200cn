:root { --bg:#0b0c10; --fg:#e5e7eb; --muted:#9aa0a6; --card:#10151f; --line:#1f2937; --accent:#60a5fa; }
*{ box-sizing:border-box; }
html,body{ margin:0; background:var(--bg); color:var(--fg); font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; }
a{ color:var(--accent); text-decoration:none; }
.small{ font-size:12px; } .muted{ color:var(--muted); }
.btn{ background:#142136; color:var(--fg); border:1px solid #2a3a56; border-radius:8px; padding:6px 10px; cursor:pointer; }
.btn.primary{ background:#2563eb; border-color:#1d4ed8; }
.btn.small{ font-size:12px; padding:4px 8px; }
.btn.file input{ display:none; }
.input{ background:#0f172a; color:var(--fg); border:1px solid #334155; border-radius:8px; padding:8px 10px; width:100%; }

.topbar{ display:flex; align-items:center; justify-content:space-between; padding:10px 16px; border-bottom:1px solid var(--line); background:#0d1220; position:sticky; top:0; z-index:10; }
.nav a, .nav .btn{ margin-left:8px; }

.layout{ display:grid; grid-template-columns:280px 1fr 360px; gap:12px; padding:12px; }
.sidebar,.workspace,.assistant{ min-height:calc(100vh - 56px); }
.card{ background:var(--card); border:1px solid var(--line); border-radius:12px; padding:12px; margin-bottom:12px; }
.row{ display:flex; gap:8px; align-items:center; }
.row.wrap{ flex-wrap:wrap; }
.row.right{ justify-content:flex-end; }
.grid.two{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }

.list .item{ padding:10px; border:1px solid var(--line); border-radius:10px; margin-bottom:8px; cursor:pointer; }
.list .item.active{ background:#172554; }
.list.vocab .item{ display:flex; justify-content:space-between; }

.tabs{ display:flex; gap:6px; margin-bottom:8px; }
.tab{ background:#111827; border:1px solid #2a3a56; color:var(--fg); padding:6px 10px; border-radius:8px; cursor:pointer; }
.tab.active{ background:#1e293b; border-color:#3b82f6; }
.panel.hide{ display:none; }

.player-box{ background:black; border-radius:12px; overflow:hidden; position:relative; border:1px solid var(--line); }
#ytPlayer{ aspect-ratio:16/9; width:100%; background:black; }
.subs{ position:absolute; left:0; right:0; bottom:4%; text-align:center; padding:0 5%; pointer-events:none; }
.sub{ text-shadow:0 2px 4px rgba(0,0,0,.8); }
.sub.en{ font-size:22px; font-weight:600; margin-bottom:4px; }
.sub.zh{ font-size:18px; color:#d1d5db; }

.timeline{ max-height:360px; overflow:auto; border:1px solid var(--line); border-radius:10px; padding:8px; }
.timeline .seg{ padding:6px 8px; border-radius:8px; cursor:pointer; }
.timeline .seg.active{ background:#0e223b; }

.snippet{ min-height:96px; background:#0f172a; border:1px solid #334155; border-radius:10px; padding:10px; overflow:auto; }
.prompt{ white-space:pre-wrap; background:#0b1220; border:1px dashed #334155; border-radius:8px; padding:8px; margin-bottom:8px; }
.quiz .q{ border:1px solid #293241; border-radius:8px; padding:10px; margin-bottom:8px; background:#0f172a; }
.quiz .choices{ display:grid; gap:4px; }

.chat{ border:1px solid var(--line); border-radius:12px; padding:8px; height:calc(100vh - 240px); overflow:auto; background:#0f172a; margin-bottom:8px; }
.msg{ margin:8px 0; } .msg .role{ font-size:12px; color:#a3a3a3; margin-bottom:4px; }
.msg .bubble{ padding:8px 10px; border-radius:10px; background:#192338; border:1px solid #32435f; display:inline-block; }
.msg.user .bubble{ background:#11304f; border-color:#2a3a56; }

.checklist{ margin:0; padding-left:18px; }
.doc section{ margin:12px 0; }
.doc h4{ margin:8px 0; }

.dialog{ border:none; padding:0; background:transparent; }
.dialog::backdrop{ background:rgba(4,10,20,.6); }
.dialog-body{ width:560px; background:#0f172a; border:1px solid var(--line); border-radius:12px; padding:16px; }
.dialog-body h3{ margin:0 0 8px; }
.dialog-body label{ display:block; margin:10px 0; }

@media (max-width:1100px){
  .layout{ grid-template-columns: 1fr; }
  .assistant{ order:3; } .sidebar{ order:1; } .workspace{ order:2; }
}